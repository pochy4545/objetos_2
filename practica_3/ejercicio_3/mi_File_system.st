TestCase subclass: #DirectorioTest	instanceVariableNames: 'vacio conUnArchivo conVariosArchivos conSubdirectorios config grande backup2015'	classVariableNames: ''	poolDictionaries: ''	category: 'mi_File_system'!!DirectorioTest methodsFor: 'running' stamp: 'initialize 4/24/2018 17:49'!testListadoDeContenido	| listado listadoStream |	self assert: vacio listadoDeContenido = '- home'.	self assert: conUnArchivo listadoDeContenido = '- var (1 archivos)'.	self assert: conVariosArchivos listadoDeContenido = '- tmp (4 archivos)'.	listadoStream := WriteStream on: String new.	listadoStream << '- log (1 archivos)'; cr.	listadoStream << '-- mysql (4 archivos)'; cr.	listadoStream << '--- older (1 archivos)'; cr.	listadoStream << '-- postgres (3 archivos)'.	listado := listadoStream contents.	self assert: conSubdirectorios listadoDeContenido = listado! !!DirectorioTest methodsFor: 'running' stamp: 'JulianGrigera 4/6/2016 15:46'!setUp	| date |	date := '2015-01-01'.	"Directorio vacío"	vacio := Directorio llamado: 'home' creadoEl: date .	"Directorio con un solo archivo"	conUnArchivo := Directorio llamado: 'var' creadoEl: date.	config := Archivo llamado: 'config.bak' creadoEl: '2016-04-02' asDate kBytes: 128.	conUnArchivo agregar: config.	"Directorio con varios archivos, pero sin subdirectorios"	conVariosArchivos := Directorio llamado: 'tmp' creadoEl: date.	grande := Archivo llamado: 'grande.tmp' creadoEl: '2016-04-02' asDate kBytes: 2000000.	conVariosArchivos		agregar: (Archivo llamado: 'nada.tmp' creadoEl: '2015-05-01' asDate kBytes: 0);		agregar: (Archivo llamado: 'chico.tmp' creadoEl: '2013-06-03' asDate kBytes: 10);		agregar: grande;		agregar: (Archivo llamado: 'mediano.tmp' creadoEl: '1995-11-23' asDate kBytes: 10000).	"Directorio con subdirectorios, archivos, y archivos dentro de los subdirectorios"	conSubdirectorios := Directorio llamado: 'log' creadoEl: date.	backup2015 := Archivo llamado: '2015.zip' creadoEl: '2016-04-06' asDate kBytes: 240000000.	conSubdirectorios		agregar: (Archivo llamado: 'sys.log' creadoEl: '2016-03-03' asDate kBytes: 90000);		agregar:				((Directorio llamado: 'mysql' creadoEl: date)						agregar: (Archivo llamado: 'mysql01.log' creadoEl: '2015-12-03' asDate kBytes: 1200000);						agregar: (Archivo llamado: 'mysql02.log' creadoEl: '2014-03-03' asDate kBytes: 2000000);						agregar: (Archivo llamado: 'mysql03.log' creadoEl: '2013-03-21' asDate kBytes: 2000000);						agregar: (Archivo llamado: 'mysql04.log' creadoEl: '2014-07-15' asDate kBytes: 2000000);						agregar:								((Directorio llamado: 'older' creadoEl: date)										agregar: backup2015;										yourself);						yourself);		agregar:				((Directorio llamado: 'postgres' creadoEl: date)						agregar: (Archivo llamado: 'pg01.log' creadoEl: '2015-04-12' asDate kBytes: 1400000);						agregar: (Archivo llamado: 'pg02.log' creadoEl: '2016-03-08' asDate kBytes: 4000000);						agregar: (Archivo llamado: 'pg03.log' creadoEl: '2016-02-13' asDate kBytes: 4000000);						yourself)! !!DirectorioTest methodsFor: 'tests' stamp: 'initialize 4/23/2018 10:06'!testArchivoMasNuevo    self assert: conVariosArchivos archivoMasNuevo = grande.! !!DirectorioTest methodsFor: 'tests' stamp: 'initialize 4/23/2018 10:12'!testTamanoTotalOcupado    self assert: (conVariosArchivos tamanoTotalOcupado ) = 2010042.     self assert: ( vacio tamanoTotalOcupado ) = 32.! !!DirectorioTest methodsFor: 'tests' stamp: 'initialize 4/23/2018 10:04'!testArchivoMasGrande        self assert: conVariosArchivos archivoMasGrande = grande.! !Object subclass: #FileSystem_mio	instanceVariableNames: 'creadoEl nombre kbytes'	classVariableNames: ''	poolDictionaries: ''	category: 'mi_File_system'!!FileSystem_mio commentStamp: 'Anonymous 4/24/2018 19:07' prior: 0!practica3!!FileSystem_mio methodsFor: 'accessing' stamp: 'initialize 4/22/2018 19:06'!nombre: aName	nombre:= aName.! !!FileSystem_mio methodsFor: 'accessing' stamp: 'initialize 4/23/2018 10:02'!kbytes  ^kbytes.! !!FileSystem_mio methodsFor: 'accessing' stamp: 'initialize 4/22/2018 19:07'!creadoEl: aDate  creadoEl:= aDate.! !!FileSystem_mio methodsFor: 'accessing' stamp: 'initialize 4/22/2018 19:07'!creadoEl  ^creadoEl! !!FileSystem_mio methodsFor: 'accessing' stamp: 'Anonymous 4/24/2018 19:11'!archivoMasGrande ^ self subclassResponsibility ! !!FileSystem_mio methodsFor: 'accessing' stamp: 'initialize 4/22/2018 19:07'!nombre  ^nombre.! !!FileSystem_mio methodsFor: 'accessing' stamp: 'Anonymous 4/24/2018 19:11'!archivoMasNuevo ^ self subclassResponsibility ! !!FileSystem_mio methodsFor: 'as yet unclassified' stamp: 'initialize 4/22/2018 19:34'!cantidad ^self subclassResponsibility.! !!FileSystem_mio methodsFor: 'as yet unclassified' stamp: 'initialize 4/22/2018 19:21'!tamanoTotalOcupado ^self subclassResponsibility.! !FileSystem_mio subclass: #Archivo	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'mi_File_system'!!Archivo commentStamp: 'Anonymous 4/24/2018 19:07' prior: 0!practica3!!Archivo methodsFor: 'accessing' stamp: 'initialize 4/22/2018 19:14'!kbytes: aSize  kbytes := aSize.! !!Archivo methodsFor: 'as yet unclassified' stamp: 'Anonymous 4/25/2018 14:32'!listadoDeContenidoCon: unNivel  	|listadoS |  listadoS := WriteStream on: String new. ^ listadoS <<'error';contents .! !!Archivo methodsFor: 'as yet unclassified' stamp: 'initialize 4/22/2018 20:15'!listadoDeContenido! !!Archivo methodsFor: 'as yet unclassified' stamp: 'initialize 4/22/2018 19:36'!cantidad  ^1.! !!Archivo methodsFor: 'as yet unclassified' stamp: 'initialize 4/22/2018 19:22'!tamanoTotalOcupado    ^ self kbytes.! !!Archivo methodsFor: 'as yet unclassified' stamp: 'initialize 4/22/2018 20:57'!archivoMasGrande ^self.! !!Archivo methodsFor: 'as yet unclassified' stamp: 'initialize 4/23/2018 10:06'!archivoMasNuevo	^self.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Archivo class	instanceVariableNames: ''!!Archivo class methodsFor: 'as yet unclassified' stamp: 'initialize 4/22/2018 19:15'!llamado: aName creadoEl: aDate  kBytes: aSize.		^ self new nombre: aName; creadoEl: aDate ; kbytes: aSize .! !FileSystem_mio subclass: #Directorio	instanceVariableNames: 'contenidoDir'	classVariableNames: ''	poolDictionaries: ''	category: 'mi_File_system'!!Directorio commentStamp: 'Anonymous 4/24/2018 19:07' prior: 0!practica3!!Directorio methodsFor: 'accessing' stamp: 'Anonymous 4/24/2018 19:03'!contenidoDir ^ contenidoDir.! !!Directorio methodsFor: 'initialization' stamp: 'Anonymous 4/24/2018 19:10'!initialize 	contenidoDir := Set new.	kbytes:=32. 	! !!Directorio methodsFor: 'as yet unclassified' stamp: 'Anonymous 4/25/2018 14:39'!listadoDeContenidoCon: unNivel   |cantA listadoS|   listadoS := WriteStream on: String new.   cantA := self contarArchivos.	unNivel timesRepeat: [listadoS << '-' ].   listadoS nextPut: Character space ;<< (self nombre).	(cantA == 0)    ifFalse: [ listadoS nextPut: Character space ;<< '('; <<cantA ; nextPut: Character space ;<< 'archivos)'].	 (self contenidoDir asSortedCollection:[:cont1 :cont2 | cont1 nombre < cont2 nombre ]) do: [ :cont  | ((cont listadoDeContenidoCon: unNivel +1 )='error') ifFalse: [listadoS nextPut: Character cr ;<<  (cont listadoDeContenidoCon: unNivel +1) ] ].	 ^ listadoS contents.		 ! !!Directorio methodsFor: 'as yet unclassified' stamp: 'initialize 4/22/2018 19:36'!cantidad  ^0.! !!Directorio methodsFor: 'as yet unclassified' stamp: 'initialize 4/24/2018 14:27'!listadoDeContenido   |nivel|   	nivel:= 1.   ^ self listadoDeContenidoCon: nivel.		 ! !!Directorio methodsFor: 'as yet unclassified' stamp: 'Anonymous 4/24/2018 19:04'!tamanoTotalOcupado				^	self contenidoDir inject: self kbytes  into: [ :suma :unContenido | suma + unContenido tamanoTotalOcupado]. ! !!Directorio methodsFor: 'as yet unclassified' stamp: 'Anonymous 4/24/2018 19:04'!contarArchivos 	^self contenidoDir inject: 0 into: [ :suma :cont | suma + cont cantidad ]. ! !!Directorio methodsFor: 'as yet unclassified' stamp: 'Anonymous 4/24/2018 19:05'!archivoMasGrande		^ self contenidoDir inject: (self contenidoDir  anyOne)into: [ :masGrande :unArchivo |((unArchivo archivoMasGrande kbytes) > (masGrande  archivoMasGrande kbytes))ifTrue: [unArchivo ] ifFalse: [masGrande ]].! !!Directorio methodsFor: 'as yet unclassified' stamp: 'Anonymous 4/24/2018 19:05'!archivoMasNuevo		^ self contenidoDir inject: (self contenidoDir  anyOne)into: [ :masNuevo :unArchivo |(unArchivo archivoMasNuevo creadoEl > masNuevo  archivoMasNuevo creadoEl)ifTrue: [unArchivo ] ifFalse: [masNuevo ]]! !!Directorio methodsFor: 'as yet unclassified' stamp: 'Anonymous 4/24/2018 19:03'!agregar: aFile.  self contenidoDir add: aFile.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Directorio class	instanceVariableNames: ''!!Directorio class methodsFor: 'as yet unclassified' stamp: 'initialize 4/22/2018 19:05'!llamado: aName creadoEl: aDate 	^ self new  nombre: aName ; creadoEl: aDate.! !