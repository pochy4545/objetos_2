Object subclass: #Botella	instanceVariableNames: 'price marca nombre'	classVariableNames: ''	poolDictionaries: ''	category: 'practica5_3'!!Botella commentStamp: 'Anonymous 5/10/2018 22:18' prior: 0!5.3!!Botella methodsFor: 'accessing' stamp: 'Anonymous 5/11/2018 00:26'!marca:unaMarca marca:=unaMarca ! !!Botella methodsFor: 'accessing' stamp: 'Anonymous 5/11/2018 00:26'!marca ^marca ! !!Botella methodsFor: 'accessing' stamp: 'Anonymous 5/11/2018 00:26'!nombre ^nombre! !!Botella methodsFor: 'accessing' stamp: 'Anonymous 5/11/2018 00:26'!nombre:unNombre nombre:=unNombre ! !!Botella methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/9/2018 23:48'!= anotherBottle	^ self price = anotherBottle price! !!Botella methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/9/2018 22:01'!price	^ 5! !!Botella methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/9/2018 23:48'!hash	^ self price hash! !Object subclass: #Moneda	instanceVariableNames: 'valor'	classVariableNames: ''	poolDictionaries: ''	category: 'practica5_3'!!Moneda commentStamp: 'Anonymous 5/10/2018 22:18' prior: 0!5.3!!Moneda methodsFor: 'accessing' stamp: 'Anonymous 5/11/2018 00:28'!valor:unValor valor:=unValor! !!Moneda methodsFor: 'accessing' stamp: 'Anonymous 5/11/2018 00:28'!valor ^valor! !!Moneda methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/9/2018 23:37'!= anotherCoin^	self value = anotherCoin value! !!Moneda methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/9/2018 22:01'!value	self subclassResponsibility ! !!Moneda methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/9/2018 23:38'!hash	^ self value hash! !Moneda subclass: #DosPesos	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'practica5_3'!!DosPesos commentStamp: 'Anonymous 5/9/2018 22:18' prior: 0!5.3!!DosPesos methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/11/2018 00:31'!value	^self valor.! !!DosPesos methodsFor: 'initialization' stamp: 'Anonymous 5/11/2018 00:29'!initialize self valor: 2.! !Moneda subclass: #MedioPeso	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'practica5_3'!!MedioPeso commentStamp: 'Anonymous 5/10/2018 22:17' prior: 0!5.3!!MedioPeso methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/11/2018 00:31'!value	^self valor.! !!MedioPeso methodsFor: 'initialization' stamp: 'Anonymous 5/11/2018 00:30'!initialize self valor:0.50! !Moneda subclass: #UnPeso	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'practica5_3'!!UnPeso commentStamp: 'Anonymous 5/9/2018 22:17' prior: 0!5.3!!UnPeso methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/11/2018 00:30'!value	^self valor.! !!UnPeso methodsFor: 'initialization' stamp: 'Anonymous 5/11/2018 00:30'!initialize self valor: 1.! !Object subclass: #VMEstado	instanceVariableNames: 'vendingMachine'	classVariableNames: ''	poolDictionaries: ''	category: 'practica5_3'!!VMEstado commentStamp: 'Anonymous 5/10/2018 22:17' prior: 0!5.3!!VMEstado methodsFor: 'accessing' stamp: 'Anonymous 5/11/2018 01:00'!vendingMachine:aVendigmachinevendingMachine:=aVendigmachine! !!VMEstado methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/11/2018 00:07'!botella	^ self vendingMachine botella! !!VMEstado methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/9/2018 22:11'!dineroRestante	self subclassResponsibility ! !!VMEstado methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/9/2018 22:22'!vendingMachine	^ vendingMachine! !!VMEstado methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/11/2018 01:01'!ingresar: unaMoneda	self subclassResponsibility ! !!VMEstado methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/11/2018 00:07'!bottleValue	^ self botella value! !!VMEstado methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/11/2018 00:09'!informar: aMessage	self vendingMachine informar: aMessage! !!VMEstado methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/9/2018 22:11'!cancelarCompra	self subclassResponsibility ! !!VMEstado methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/9/2018 22:11'!confirmarCompra	self subclassResponsibility ! !!VMEstado methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/9/2018 22:02'!compra: cantDeBotellas	self subclassResponsibility ! !!VMEstado methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/9/2018 22:11'!poseeVuelto	self subclassResponsibility ! !VMEstado subclass: #Libre	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'practica5_3'!!Libre commentStamp: 'Anonymous 5/10/2018 22:17' prior: 0!5.3!!Libre methodsFor: 'initialization' stamp: 'Anonymous 5/11/2018 00:24'!initialize: aVendingMachine	self vendingMachine:aVendingMachine ! !!Libre methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/11/2018 00:09'!dineroRestante		self informar: 'error'! !!Libre methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/11/2018 00:03'!compra: cantDeBotellas	cantDeBotellas = 0		ifTrue: [ Transcript show: '#error'. ^false ].	self vendingMachine stock >= cantDeBotellas		ifTrue: [ self vendingMachine cambiarEstadoOcupadoCon:cantDeBotellas.			^ true ].	^ false! !!Libre methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/11/2018 00:09'!confirmarCompra		self informar: 'error'! !!Libre methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/11/2018 00:09'!cancelarCompra	self informar: 'error'! !!Libre methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/11/2018 00:31'!poseeVuelto	self informar: 'error'.	! !!Libre methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/11/2018 01:01'!ingresar: unaMoneda		self informar: 'error'! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Libre class	instanceVariableNames: ''!!Libre class methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/9/2018 22:24'!for: aVendingMachine	^self new initialize: aVendingMachine! !VMEstado subclass: #Ocupado	instanceVariableNames: 'cantidad ingresado'	classVariableNames: ''	poolDictionaries: ''	category: 'practica5_3'!!Ocupado commentStamp: 'Anonymous 5/10/2018 22:17' prior: 0!5.3!!Ocupado methodsFor: 'accessing' stamp: 'Anonymous 5/11/2018 00:25'!cantidad:unCantidad cantidad:=unCantidad ! !!Ocupado methodsFor: 'initialization' stamp: 'Anonymous 5/11/2018 00:25'!initialize: cantidadDeBotellas para: aVendingMachine	self cantidad: cantidadDeBotellas.	self vendingMachine: aVendingMachine.! !!Ocupado methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/6/2018 22:45'!finalValue	^ self cantidad * self bottleValue ! !!Ocupado methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/6/2018 00:47'!ingresado: unaMoneda	ingresado := self ingresado + unaMoneda value.	self vendingMachine dinero add: unaMoneda ! !!Ocupado methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/9/2018 23:02'!dineroRestante	^ self costoTotal - self ingresado ! !!Ocupado methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/10/2018 22:18'!costoTotal	^ self cantidad * Botella new price! !!Ocupado methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/9/2018 00:12'!initialize	ingresado := 0.! !!Ocupado methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/9/2018 00:21'!ingresar: unaMoneda	self ingresado: unaMoneda.	^ self ingresado >= self costoTotal ! !!Ocupado methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/9/2018 22:56'!ingresado	^ingresado! !!Ocupado methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/11/2018 00:02'!confirmarCompra	(self dineroRestante <= 0 &  (self poseeVuelto) )		ifTrue: [ self vendingMachine comprar.			^ self ].	Transcript show: 'Te faltan ' , self dineroRestante asString , 'pesos.'! !!Ocupado methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/11/2018 00:05'!cancelarCompra	self vendingMachine dinero removeAll: (self vendingMachine vueltoPara: self costoTotal).	self vendingMachine cambiarEstadoALibre.! !!Ocupado methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/9/2018 22:38'!cantidad	^cantidad! !!Ocupado methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/9/2018 22:31'!compra: cantidadDeBotellas	^false! !!Ocupado methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/9/2018 23:50'!poseeVuelto^	self vendingMachine poseeVuelto: self ingresado! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Ocupado class	instanceVariableNames: ''!!Ocupado class methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/11/2018 00:23'!cant: cantidadDeBotellas for: aVendinMachine	^self new initialize: cantidadDeBotellas para: aVendinMachine ! !Object subclass: #VendingMachine	instanceVariableNames: 'dinero botella estado'	classVariableNames: ''	poolDictionaries: ''	category: 'practica5_3'!!VendingMachine commentStamp: 'Anonymous 5/10/2018 22:17' prior: 0!5.3!!VendingMachine methodsFor: 'accessing' stamp: 'Anonymous 5/11/2018 00:16'!dinero:unMonto dinero:=unMonto ! !!VendingMachine methodsFor: 'accessing' stamp: 'Anonymous 5/11/2018 00:17'!botella:unaBotella botella:=unaBotella! !!VendingMachine methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/7/2018 00:35'!poseeVuelto^	self state poseeVuelto! !!VendingMachine methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/9/2018 22:25'!dinero ^dinero! !!VendingMachine methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/9/2018 01:05'!poseeVuelto: monto	^((self vueltoPara: monto) sumNumbers: [ :c | c value ]) = monto! !!VendingMachine methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/11/2018 00:04'!cambiarEstadoOcupadoCon:cantDeBotellas self state: (Ocupado cant: cantDeBotellas  for: self) .! !!VendingMachine methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/11/2018 00:07'!stock	^ self botella occurrencesOf: Botella new! !!VendingMachine methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/11/2018 00:06'!botella	^ botella! !!VendingMachine methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/11/2018 00:08'!informar: aMessage	Transcript show: aMessage! !!VendingMachine methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/11/2018 00:05'!cambiarEstadoALibre self state: (Libre for: self).! !!VendingMachine methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/8/2018 00:35'!ingresar: unaMoneda^	self state ingresar: unaMoneda! !!VendingMachine methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/11/2018 00:06'!state	^estado! !!VendingMachine methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/8/2018 00:35'!dineroRestante^	self state dineroRestante! !!VendingMachine methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/8/2018 00:43'!comprar: cantidadDeBotellas	^ self state compra: cantidadDeBotellas! !!VendingMachine methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/9/2018 00:35'!costoTotal^	self state costoTotal! !!VendingMachine methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/11/2018 00:07'!libre	self state: (Libre for: self)! !!VendingMachine methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/7/2018 00:57'!vueltoPara: monto	| restante usadas |	restante := monto.	usadas := Bag new.	(self dinero occurrencesOf: DosPesos new)		timesRepeat: [ restante >= 2				ifTrue: [ restante := restante - 2.					usadas add: DosPesos new ] ].	(self dinero occurrencesOf: UnPeso new)		timesRepeat: [ restante >= 1				ifTrue: [ restante := restante - 1.					usadas add: UnPeso new ] ].	(self dinero occurrencesOf: MedioPeso new)		timesRepeat: [ restante >= 0.5				ifTrue: [ restante := restante - 0.5.					usadas add: MedioPeso new ] ].	^ usadas! !!VendingMachine methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/11/2018 00:06'!state: aVMState	estado := aVMState ! !!VendingMachine methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/8/2018 00:37'!cancelarCompra	self state cancelarCompra ! !!VendingMachine methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/11/2018 00:07'!comprar	self dinero removeAll: (self vueltoPara: self state costoTotal).	self state cantidad timesRepeat: [ self botella remove: Botella new ].	self libre! !!VendingMachine methodsFor: 'as yet unclassified' stamp: 'Anonymous 5/7/2018 01:00'!confirmarCompra^	self state confirmarCompra! !!VendingMachine methodsFor: 'initialization' stamp: 'Anonymous 5/11/2018 00:18'!initialize	self dinero: Bag new.	self state:( Libre for: self).	self botella: Bag new! !